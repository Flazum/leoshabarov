<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Bases and Adics — Notes</title>

<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;700&display=swap" rel="stylesheet"/>
<!-- KaTeX for crisp, fast math -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVdO8vC28MlOZqvWyYQPTfT6DGm3QwGxK7fY9zQ4mVUTZl5Dg4R1XQ8XWFP0aG" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" integrity="sha384-+hN8Wm4Z4v3XhU1n1jT0mGd6+0cJp0sK0C7w6O0XgZzKc7u1F0fQy0k6bP0qYx3D" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" integrity="sha384-mll67QQbq6p4Y+z6J8a0t1qfQX+8kz3cM3rA9H3yJmBfQYp2Z0ru3sS0v+K0Ww1y" crossorigin="anonymous"
  onload="renderMathInElement(document.body,{delimiters:[{left:'$$',right:'$$',display:true},{left:'\\(',right:'\\)',display:false}]});"></script>

<style>
:root{
  --ink:#eaf1ff; --muted:#a8b4d9; --line:#1a1f36; --bg:#070913;
  --g1:#6ee7ff; --g2:#8b5cf6; --glow: rgba(110,231,255,.35);
}
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  background:var(--bg); color:var(--ink);
  font-family:'Space Grotesk',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
}

/* Header */
.wrap{width:min(1100px,92%);margin-inline:auto}
.header{position:sticky;top:0;z-index:20;background:linear-gradient(180deg,rgba(7,9,19,.86),rgba(7,9,19,.62) 70%,transparent);backdrop-filter:blur(10px)}
.nav{display:flex;align-items:center;justify-content:space-between;padding:14px 0}
.brand{display:flex;align-items:center;gap:.7rem;text-decoration:none;color:inherit}
.logo{width:40px;height:40px;border-radius:12px;background:conic-gradient(from var(--rot,0deg),var(--g1),var(--g2),#4dd4ff,#a78bfa,var(--g1));display:grid;place-items:center;box-shadow:0 10px 30px #0009}
.logo svg{opacity:.9}
.links{display:flex;gap:1rem}
.links a{color:var(--ink);text-decoration:none;font-weight:700;opacity:.9}
.hr{height:1px;background:linear-gradient(90deg,transparent,rgba(255,255,255,.08),transparent)}

/* Title */
.hero{padding:38px 0 18px; text-align:center}
.kicker{
  display:inline-flex;align-items:center;gap:.5rem;
  font-weight:800;font-size:.95rem;color:#0a0c18;
  background:linear-gradient(135deg,var(--g1),var(--g2));
  padding:.35rem .7rem;border-radius:999px;
}
.h1{font-size:clamp(2.2rem,5vw,3.2rem);line-height:1.08;margin-top:12px}

/* Prose */
.prose{
  width:min(860px,92%); margin: 26px auto 64px;
  line-height:1.65; font-size:1.08rem;
}
.prose p{margin:0 0 1rem 0; color:#dfe7ff}
.prose p.lead{color:var(--muted); font-size:1.18rem; text-align:center; margin-bottom:1.1rem}
.prose h2{font-size:clamp(1.4rem,2.6vw,1.9rem); margin:1.6rem 0 .8rem; text-align:center}
.prose h3{font-size:clamp(1.15rem,2.2vw,1.3rem); margin:1.2rem 0 .5rem; color:#cfe1ff; text-align:center}
.center{text-align:center}
.muted{color:var(--muted)}
.callout{
  border:1px solid var(--line); border-radius:16px; padding:16px 18px; margin:18px auto;
  background:linear-gradient(180deg,rgba(15,20,40,.7),rgba(10,14,28,.7));
  box-shadow:0 12px 30px #0008; width:min(760px,100%);
}

/* Math */
mjx-container[jax="SVG"]{overflow-x:auto}
.math-block mjx-container{display:block;margin:10px auto;text-align:center}

/* Widgets (centered, smooth) */
.widget{
  border:1px solid var(--line); border-radius:16px;
  background:linear-gradient(180deg,#0a0f1e,#090b18);
  padding:16px; margin:18px auto 22px; box-shadow:0 14px 36px #0009;
  width:min(800px,100%);
}
.widget h4{margin:0 0 .6rem; font-size:1.05rem; text-align:center}
.controls{display:flex;flex-wrap:wrap;gap:.6rem;align-items:center;justify-content:center;margin:.5rem 0 1rem}
.controls input[type="text"], .controls input[type="number"], .controls select{
  background:#0a0f26; border:1px solid var(--line); color:var(--ink);
  padding:.6rem .75rem; border-radius:12px; min-width:0;
}
.readout{
  display:grid; gap:.5rem; justify-items:center;
}
.out{
  background:#0b1022;border:1px solid var(--line);color:#eaf1ff;
  padding:.7rem .9rem;border-radius:12px;font-family:ui-monospace, SFMono-Regular, Menlo, monospace; word-break:break-all;
  width:100%; max-width:720px;
}
.badge{font-size:.85rem;padding:.25rem .55rem;border-radius:999px;background:linear-gradient(135deg,var(--g1),var(--g2));color:#0a0c18;margin-left:.5rem}

/* Visual rhythm */
.fade{opacity:0; transform:translateY(10px); transition:opacity .5s ease, transform .5s ease}
.fade.on{opacity:1; transform:none}

/* Carry demo row */
.carry{
  display:flex;gap:.5rem;justify-content:center;align-items:center;
  font-family:ui-monospace, SFMono-Regular, Menlo, monospace;
  color:#cfe1ff; letter-spacing:.06em; user-select:none;
}
.carry .bubble{
  background:#0b1022;border:1px solid var(--line);padding:.35rem .6rem;border-radius:8px;
  animation:pop .6s ease forwards; transform:translateY(8px); opacity:0;
}
@keyframes pop{to{transform:none;opacity:1}}

/* Tail-match bar */
.tmbar{
  width:min(720px,100%);height:12px;border-radius:999px;
  background:#10142b;border:1px solid #1e2342;overflow:hidden;margin:.4rem auto 0;
}
.tmbar > div{
  height:100%;width:0%;background:linear-gradient(90deg,var(--g1),var(--g2));
  box-shadow:0 0 24px var(--glow);
  transition:width .45s ease;
}

/* Small screens */
@media (max-width:580px){
  .controls{flex-direction:column;align-items:stretch}
}

/* subtle cursor sheen */
.cursor{position:fixed;left:0;top:0;width:26px;height:26px;border-radius:50%;
  background:radial-gradient(circle at 30% 30%,rgba(255,255,255,.78),rgba(255,255,255,.18));
  mix-blend-mode:overlay;pointer-events:none;z-index:50;transform:translate(-50%,-50%)}
</style>
</head>
<body>
<header class="header">
  <div class="wrap nav">
    <a class="brand" href="/#top" aria-label="Back to Home">
      <div class="logo"><svg width="16" height="16" viewBox="0 0 24 24"><path d="M12 2l2.8 6.6L22 9.3l-5 4.6L18.6 21 12 17.7 5.4 21 7 13.9 2 9.3l7.2-.7L12 2z" fill="white"/></svg></div>
      <span style="font-weight:700">Leo Shabarov</span>
    </a>
    <div class="links">
      <a href="/#about">About</a>
      <a href="/#courses">Courses</a>
      <a href="/notes/">Notebook</a>
      <a href="/#desmos">Desmos</a>
      <a href="/#contact">Contact</a>
    </div>
  </div>
  <div class="hr"></div>
</header>

<main>
  <section class="wrap hero fade">
    <span class="kicker">Notebook</span>
    <h1 class="h1">Bases and Adics</h1>
  </section>

  <article class="prose">
    <p class="lead fade">
      Same quantity, different language. In base&nbsp;10, \(2+2=4\). In base&nbsp;4 it’s \(10\). In base&nbsp;2 it’s \(100\).
    </p>

    <div class="callout fade">
      We’ll keep things conversational. First: bases as a language for place-value.
      Then: \(p\)-adics, where “closeness” means “same <em>ending</em> digits.”
    </div>

    <h2 class="fade">A quick base refresher</h2>
    <p class="fade center">
      In base \(b\), the string \((d_k\cdots d_1 d_0)_b\) means \(\sum_{i=0}^k d_i b^i\),
      with digits \(d_i\in\{0,\dots,b-1\}\).
    </p>

    <!-- Live Base Converter -->
    <div class="widget fade" id="w-convert">
      <h4>Base Converter <span class="badge">live</span></h4>
      <div class="controls">
        <input id="inNum" type="text" value="1234" placeholder="number (e.g. 1A3, 101101, 1234)" />
        <input id="inBase" type="number" min="2" max="36" value="10" title="input base"/>
        <span style="opacity:.6">→</span>
        <input id="outBase" type="number" min="2" max="36" value="2" title="output base"/>
      </div>
      <div class="readout">
        <div class="out" id="convertOut"></div>
        <div class="out" id="expandOut"></div>
      </div>
      <p class="muted center" style="margin-top:.6rem">
        Digits above 9 use A=10, B=11, …, Z=35. Updates as you type.
      </p>
    </div>

    <h2 class="fade">How the digits “stack”</h2>
    <p class="fade center">
      Example in base 10:
      <span class="math-block">$$1234 = 1\cdot 10^3 + 2\cdot 10^2 + 3\cdot 10^1 + 4\cdot 10^0$$</span>
      Same idea works for any base \(b\).
    </p>

    <h2 class="fade">Infinite carrying (10-adic intuition)</h2>
    <p class="fade center">
      In 10-adics, adding \(1\) to \(\ldots 9999\) carries forever — you land at \(\ldots 0000 = 0\).
      So \(\ldots 9999 = -1\) (10-adically).
    </p>

    <!-- Animated carry demo -->
    <div class="carry fade" aria-hidden="true">
      <span class="bubble" style="animation-delay:.05s">… 9 9 9 9</span>
      <span class="bubble" style="animation-delay:.25s">+</span>
      <span class="bubble" style="animation-delay:.35s">1</span>
      <span class="bubble" style="animation-delay:.55s">=</span>
      <span class="bubble" style="animation-delay:.75s">… 0 0 0 0</span>
    </div>

    <div class="callout fade center">
      \(\ldots 9999 = -1\), \(\;\ldots 3333 = -\tfrac{1}{3}\).
      The more trailing digits two numbers share in base \(p\), the “closer” they are in \(p\)-adics.
    </div>

    <h2 class="fade">p-adic “closeness”, visualized</h2>
    <p class="fade center">
      Type two base-\(p\) numbers; the bar shows how many trailing digits match.
    </p>

    <!-- Tail Agreement widget -->
    <div class="widget fade" id="w-tail">
      <h4>Tail Agreement <span class="badge">live</span></h4>
      <div class="controls">
        <input id="pbase" type="number" min="2" max="16" value="10" title="base p"/>
        <input id="taA" type="text" value="...999999" placeholder="first (e.g. ...9999, 101010)"/>
        <input id="taB" type="text" value="-1" placeholder="second (e.g. -1, ...3333)"/>
      </div>
      <div class="readout">
        <div class="out" id="taText">Matching trailing digits: 0</div>
        <div class="tmbar"><div id="tmFill"></div></div>
      </div>
      <p class="muted center" style="margin-top:.6rem">
        We treat “<code>...</code>” as “many trailing copies” of the last digit shown.
      </p>
    </div>

    <h2 class="fade">A neat flip: when divergence becomes convergence</h2>
    <p class="fade center">
      Geometric series \(1 + 10 + 10^2 + \cdots\) diverges in reals, but in 10-adics
      (where \(|10|_{10} = \tfrac{1}{10} < 1\)) it converges:
      <span class="math-block">$$1 + 10 + 10^2 + \cdots = \frac{1}{1-10} = -\frac{1}{9}.$$</span>
      Which matches the “\(\ldots 1111\)” story.
    </p>

    <h2 class="fade">Where to go next</h2>
    <p class="fade center">
      Prime bases \(p\) behave cleanly (2-adics, 3-adics, …).
      If you want, we can add a sequel page (valuations, units, Hensel’s lemma) in the same style.
    </p>
  </article>
</main>

<footer class="wrap" style="display:flex;justify-content:space-between;align-items:center;gap:1rem">
  <a class="brand" href="/#top" aria-label="Back to Home">
    <div class="logo" style="width:34px;height:34px"><svg width="14" height="14" viewBox="0 0 24 24"><path d="M12 2l2.8 6.6L22 9.3l-5 4.6L18.6 21 12 17.7 5.4 21 7 13.9 2 9.3l7.2-.7L12 2z" fill="white"/></svg></div>
    <span style="font-weight:700">Home</span>
  </a>
  <div style="color:#7f93c9">© <span id="year"></span></div>
</footer>

<div class="cursor" id="cursor"></div>

<script>
/* gentle header logo drift */
let rr=0; setInterval(()=>{ rr=(rr+3)%360; document.documentElement.style.setProperty('--rot',rr+'deg')}, 60);

/* small cursor sheen */
const cursor=document.getElementById('cursor'); let cx=0,cy=0,tx=0,ty=0;
function loop(){ cx+=(tx-cx)*0.18; cy+=(ty-cy)*0.18; cursor.style.left=cx+'px'; cursor.style.top=cy+'px'; requestAnimationFrame(loop) }
loop(); addEventListener('mousemove',e=>{tx=e.clientX;ty=e.clientY});

/* fade-in on view for rhythm */
const io=new IntersectionObserver(es=>{for(const e of es){if(e.isIntersecting)e.target.classList.add('on')}},{threshold:.12});
for(const el of document.querySelectorAll('.fade')) io.observe(el);

/* ---------- Base Converter (live) ---------- */
(function(){
  const inNum = document.getElementById('inNum');
  const inBase = document.getElementById('inBase');
  const outBase = document.getElementById('outBase');
  const out = document.getElementById('convertOut');
  const expandOut = document.getElementById('expandOut');

  const digits = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ';
  const map = Object.fromEntries([...digits].map((d,i)=>[d,i]));

  function parseToBigInt(str, base){
    let s = (str||'').trim().toUpperCase();
    if(!s) return 0n;
    let sign = 1n;
    if(s.startsWith('-')){ sign=-1n; s=s.slice(1) }
    if(s.startsWith('+')) s=s.slice(1);
    if(s.includes('.')) throw new Error('Use integers only');
    const B = BigInt(base);
    let val = 0n;
    for(const ch of s){
      const v = map[ch];
      if(v==null || v>=base) throw new Error(`Bad digit "${ch}" for base ${base}`);
      val = val*B + BigInt(v);
    }
    return sign*val;
  }
  function fromBigInt(n, base){
    const B = BigInt(base);
    if(n===0n) return '0';
    const neg = n<0n; let x = neg? -n : n, s = '';
    while(x>0n){ const r = Number(x%B); s = digits[r]+s; x/=B }
    return (neg?'-':'')+s;
  }
  function mkExpand(nStr, b){
    // pretty expansion in KaTeX
    const s = (nStr||'').toUpperCase();
    if(!s || s==='0') return '\\(0\\)';
    const terms = [...s].reverse().map((ch,i)=>`${ch}\\cdot ${b}^{${i}}`).reverse().join(' + ');
    return `\$begin:math:text$${s}_{{${b}}} = ${terms}\\$end:math:text$`;
  }
  function renderKatex(node, tex){
    // safe render (KaTeX already loaded by auto-render, but we use direct render here)
    try{
      katex.render(tex.replace(/\\\(/g,'').replace(/\\\)/g,''), node, {throwOnError:false});
    }catch{ node.textContent = tex; }
  }
  let raf = null;
  function update(){
    if(raf){ cancelAnimationFrame(raf) }
    raf = requestAnimationFrame(()=>{
      try{
        const ib = clamp(+inBase.value||10,2,36);
        const ob = clamp(+outBase.value||2,2,36);
        const n = parseToBigInt(inNum.value, ib);
        const s = fromBigInt(n, ob);
        out.textContent = `${n.toString()} (base ${ib})  →  ${s} (base ${ob})`;
        // show expansion in input base
        const tex = mkExpand((inNum.value||'').trim(), ib);
        expandOut.innerHTML = '';
        const span = document.createElement('span');
        span.style.display='block'; span.style.textAlign='center';
        expandOut.appendChild(span);
        renderKatex(span, tex);
      }catch(err){
        out.textContent = '⚠️ ' + err.message;
        expandOut.textContent = '';
      }
    });
  }
  const clamp=(x,a,b)=>Math.max(a,Math.min(b,x));
  ['input','change','keyup'].forEach(ev=>{
    inNum.addEventListener(ev,update);
    inBase.addEventListener(ev,update);
    outBase.addEventListener(ev,update);
  });
  update();
})();

/* ---------- Tail Agreement (live) ---------- */
(function(){
  const pEl = document.getElementById('pbase');
  const aEl = document.getElementById('taA');
  const bEl = document.getElementById('taB');
  const out = document.getElementById('taText');
  const fill = document.getElementById('tmFill');

  function norm(s){
    s = (s||'').trim();
    if(!s) return '';
    // "...dddd" => long tail of last char
    if(s.startsWith('...')){
      const tail = s.slice(3).trim();
      const last = tail.at(-1) || '0';
      return 'x'.repeat(20) + last.repeat(120); // head ignored; long tail
    }
    if(s === '-1') return 'x'.repeat(20) + '9'.repeat(120); // 10-adic intuition
    return s;
  }
  function tailMatchCount(a,b){
    let i=a.length-1, j=b.length-1, k=0;
    while(i>=0 && j>=0){
      if(a[i]!==b[j]) break;
      k++; i--; j--;
    }
    return k;
  }
  function update(){
    const p = Math.max(2, +pEl.value||10);
    const A = norm(aEl.value);
    const B = norm(bEl.value);
    const k = tailMatchCount(A,B);
    const pct = Math.min(100, (k/60)*100);
    out.textContent = `Matching trailing digits: ${k}`;
    fill.style.width = pct.toFixed(1)+'%';
  }
  ['input','change','keyup'].forEach(ev=>{
    pEl.addEventListener(ev,update);
    aEl.addEventListener(ev,update);
    bEl.addEventListener(ev,update);
  });
  update();
})();

/* year */
document.getElementById('year').textContent = new Date().getFullYear();
</script>
</body>
</html>
