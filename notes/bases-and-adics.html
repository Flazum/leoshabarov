<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Bases & Adics — Leo Shabarov</title>
<link rel="stylesheet" href="/assets/site.css">
<!-- MathJax (LaTeX) -->
<script>
  window.MathJax = {
    tex: { inlineMath: [['\\(','\\)']], displayMath: [['\\[','\\]']] },
    svg: { fontCache: 'global' }
  };
</script>
<script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
</head>
<body>
<div id="tiles"></div>
<div data-include="header"></div>

<main class="wrap">
  <header class="fade on" style="margin-top:10px">
    <h1 class="h1">Bases & Adics</h1>
    <p class="subtitle">A visual guide to bases → p-adics, with animated carries and place-value intuition.</p>
  </header>

  <!-- Hero animation: 2+2 across bases -->
  <section class="fade" style="margin-top:20px">
    <div class="card" style="padding:16px">
      <div style="display:flex;flex-wrap:wrap;gap:16px;align-items:center;justify-content:space-between">
        <div>
          <h2 style="margin-bottom:6px">Why \(2+2\) can be \(10\) or \(100\)</h2>
          <p class="subtitle">Carries depend on the base. Slide the base and watch the sum change.</p>
        </div>
        <div>
          <label style="font-weight:700;margin-right:8px">Base</label>
          <input id="baseSlider" type="range" min="2" max="10" value="10" style="vertical-align:middle">
          <span id="baseLabel" style="margin-left:8px;font-weight:700">10</span>
        </div>
      </div>
      <div class="canvasbox small" style="margin-top:12px"><canvas id="carryCanvas"></canvas></div>
      <p style="margin-top:10px">
        In base \(b\), digits are \(0,1,\dots,b\!-\!1\). When a column reaches \(b\), it “rolls over” and carries left.  
        Example: in base \(4\), \(2+2=10_4\); in base \(2\), \(2+2=100_2\); in base \(3\), \(2+2=11_3\).
      </p>
    </div>
  </section>

  <article class="fade" style="margin-top:24px">
    <!-- Paste/expand your full guide text here; MathJax will render inline \( \) and block \[ \] -->
    <h2 style="margin:8px 0">Place value & changing base</h2>
    <p>
      A base is both the size of your digit alphabet and the scale between places. In base \(b\), a numeral
      \(a_k\ldots a_2a_1a_0\) means \(\sum_{i=0}^k a_i b^i\). Changing base changes the <em>symbols</em>, not the
      quantity. Example in base \(7\): \(351_7=3\cdot7^2+5\cdot7+1=183\).
    </p>

    <h2 style="margin:18px 0">From bases to adics (intuition)</h2>
    <p>
      For \(b\)-adics, “closeness” means sharing many trailing base-\(b\) digits. Infinite expansions extend left:
      \(\ldots d_3d_2d_1d_0\). In \(10\)-adics, \(\ldots 9999 = -1\) because adding \(1\) triggers an infinite carry:
      \(\ldots 9999 + 1 = \ldots 0000\).
    </p>
  </article>

  <!-- Infinite carry demo -->
  <section class="fade" style="margin-top:20px">
    <div class="card" style="padding:16px">
      <h2 style="margin-bottom:6px">The infinite carry: \(\ldots 9999 + 1 = 0\) (10-adics)</h2>
      <p class="subtitle">Tap to trigger a cascading carry that wipes all 9s to 0s forever.</p>
      <div class="canvasbox small" style="margin-top:12px"><canvas id="carryTrain"></canvas></div>
      <div style="margin-top:10px"><button id="carryBtn" class="pill" type="button">Trigger carry</button></div>
    </div>
  </section>
</main>

<div data-include="footer"></div>

<script src="/assets/site.js" defer></script>
<script>
/* ========= Shared-sized canvas helpers ========= */
function fitCanvas(cnv, cssH=220){
  const dpr = Math.min(devicePixelRatio||1, 2);
  const box = cnv.parentElement;
  const W = box.clientWidth || 600;
  const H = cssH;
  cnv.width = Math.floor(W*dpr); cnv.height = Math.floor(H*dpr);
  const ctx = cnv.getContext('2d');
  ctx.setTransform(dpr,0,0,dpr,0,0);
  return {ctx, W, H};
}

/* ========= 2+2 across bases (animated carry) ========= */
(function(){
  const slider = document.getElementById('baseSlider');
  const label  = document.getElementById('baseLabel');
  const cnv    = document.getElementById('carryCanvas');
  let base = +slider.value, t=0, raf;

  function draw(){
    const {ctx,W,H} = fitCanvas(cnv, 200);
    ctx.clearRect(0,0,W,H);

    // layout
    const cx = W/2, cy = H/2 - 10;
    ctx.lineWidth = 2;
    ctx.strokeStyle = 'rgba(0,0,0,.12)';

    // column boxes
    const cols = 3; const boxW=70, boxH=70; const gap=10;
    const left = cx - (cols*boxW + (cols-1)*gap)/2;

    // compute 2+2 in base
    const decSum = 4;
    function toBase(n,b){const d=[]; do{d.push(n%b); n=(n/b)|0;}while(n>0); return d.reverse();}
    const digits = toBase(decSum, base); // e.g. base2 => [1,0,0]
    // We want to show leading column(s) too; pad to 3 columns for demo
    const pad = Math.max(0, 3 - digits.length);
    const show = Array(pad).fill(0).concat(digits);

    // rolling bubble timing
    const u = (Math.sin(t*0.03)*0.5+0.5); // 0..1 back-and-forth
    // draw boxes
    ctx.fillStyle = '#fff';
    for(let i=0;i<3;i++){
      const x = left + i*(boxW+gap), y = cy - boxH/2;
      ctx.fillStyle = '#fff';
      ctx.strokeStyle = 'rgba(0,0,0,.15)';
      ctx.beginPath(); ctx.rect(x,y,boxW,boxH); ctx.fill(); ctx.stroke();

      // digit draw
      ctx.fillStyle = 'rgba(30,40,80,.95)';
      ctx.font = '32px Space Grotesk';
      ctx.textAlign = 'center'; ctx.textBaseline = 'middle';
      ctx.fillText(show[i], x+boxW/2, y+boxH/2);
    }

    // carry bubble (only appears when base <= 4 so the middle digit rolls)
    if(base<=4){
      const fromX = left + 2*(boxW+gap) + boxW/2;
      const toX   = left + 1*(boxW+gap) + boxW/2;
      const y     = cy - boxH/2 - 30;
      const x     = fromX + (toX-fromX)*u;
      ctx.beginPath();
      ctx.fillStyle = 'rgba(60,120,220,.18)';
      ctx.strokeStyle = 'rgba(60,120,220,.6)';
      ctx.arc(x,y,12,0,Math.PI*2); ctx.fill(); ctx.stroke();
      ctx.fillStyle = 'rgba(60,120,220,.95)'; ctx.font='12px Space Grotesk'; ctx.textAlign='center'; ctx.textBaseline='middle';
      ctx.fillText('carry', x, y);
    }

    // label
    ctx.fillStyle='rgba(0,0,0,.6)'; ctx.font='16px Space Grotesk'; ctx.textAlign='center';
    ctx.fillText(`2 + 2 = ${show.join('')} (base ${base})`, cx, H-14);

    t++;
    raf = requestAnimationFrame(draw);
  }

  slider.addEventListener('input', () => { base = +slider.value; label.textContent = base; });
  const start = () => { cancelAnimationFrame(raf); draw(); };
  window.addEventListener('resize', start);
  start();
})();

/* ========= Infinite carry train (…999 + 1) ========= */
(function(){
  const cnv = document.getElementById('carryTrain');
  const btn = document.getElementById('carryBtn');
  let active = false, t = 0, raf;

  function draw(){
    const {ctx,W,H} = fitCanvas(cnv, 200);
    ctx.clearRect(0,0,W,H);
    const nCols = 14;
    const boxW = Math.min(48, (W-40)/nCols);
    const boxH = 58;
    const left = (W - (nCols*boxW))/2;
    const top  = (H - boxH)/2;

    // timeline
    const k = Math.min(nCols, Math.floor(t/10)); // how many have flipped to 0
    for(let i=0;i<nCols;i++){
      const x = left + i*boxW;
      ctx.fillStyle='#fff';
      ctx.strokeStyle='rgba(0,0,0,.15)';
      ctx.beginPath(); ctx.rect(x, top, boxW-6, boxH); ctx.fill(); ctx.stroke();

      const flipped = active && (nCols-1-i) < k;
      const digit = flipped ? '0' : '9';
      ctx.fillStyle = 'rgba(30,40,80,.95)';
      ctx.font = '28px Space Grotesk'; ctx.textAlign='center'; ctx.textBaseline='middle';
      ctx.fillText(digit, x+(boxW-6)/2, top+boxH/2);
    }

    // the +1 bubble at the far right
    if(active){
      const bx = left + (nCols-1)*boxW + (boxW-6)/2;
      const by = top - 26;
      ctx.beginPath(); ctx.fillStyle='rgba(220,140,60,.18)'; ctx.strokeStyle='rgba(220,140,60,.7)';
      ctx.arc(bx,by,12,0,Math.PI*2); ctx.fill(); ctx.stroke();
      ctx.fillStyle='rgba(220,140,60,.95)'; ctx.font='12px Space Grotesk'; ctx.textAlign='center'; ctx.textBaseline='middle';
      ctx.fillText('+1', bx, by);
      t++;
      if(Math.floor(t/10) > nCols){ active=false; t=0; }
    }
    raf = requestAnimationFrame(draw);
  }

  btn.addEventListener('click', ()=>{ active=true; t=0; });
  const start = () => { cancelAnimationFrame(raf); draw(); };
  window.addEventListener('resize', start);
  start();
})();
</script>
</body>
</html>
