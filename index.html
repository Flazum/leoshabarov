<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Leo Shabarov</title>

  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;700&display=swap" rel="stylesheet">

  <!-- Shared theme + site styles (includes the tiles CSS) -->
  <link rel="stylesheet" href="/assets/theme.css">
  <link rel="stylesheet" href="/assets/site.css">

  <style>
    /* Page-specific styles only (no tiles CSS here) */
    *{box-sizing:border-box;margin:0;padding:0}
    :root{--ink:#eaf1ff;--muted:#a8b4d9;--line:#1a1f36;--bg:#070913;--g1:#6ee7ff;--g2:#8b5cf6;--gap:8px}
    html,body{height:100%}
    body{font-family:'Space Grotesk',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:var(--bg);color:var(--ink);overflow-x:hidden}
    .wrap{width:min(1200px,92%);margin-inline:auto}
    .header{position:sticky;top:0;z-index:20;background:linear-gradient(180deg,rgba(7,9,19,.8),rgba(7,9,19,.5) 70%,transparent);backdrop-filter:blur(10px)}
    .nav{display:flex;align-items:center;justify-content:space-between;padding:14px 0}
    .brand{display:flex;align-items:center;gap:.7rem;text-decoration:none;color:inherit}
    .logo{width:44px;height:44px;border-radius:12px;background:conic-gradient(from var(--rot,0deg),var(--g1),var(--g2),#4dd4ff,#a78bfa,var(--g1));display:grid;place-items:center;box-shadow:0 10px 30px #0009}
    .title{font-weight:700}
    .links{display:flex;gap:1rem}
    .links a{color:var(--ink);text-decoration:none;font-weight:700;opacity:.9}
    .iconbtn{width:48px;height:48px;border-radius:12px;display:grid;place-items:center;background:#0a0f26;border:1px solid var(--line);transition:transform .08s,box-shadow .2s}
    .iconbtn:hover{transform:translateY(-1px);box-shadow:0 12px 28px #0008}
    .hero{position:relative;min-height:86vh;display:grid;place-items:center}
    .hgrid{display:grid;grid-template-columns:1.1fr .9fr;gap:46px;align-items:center}
    .h1{font-size:clamp(2.8rem,6vw,5rem);line-height:1.03;letter-spacing:-.01em}
    .lead{color:var(--muted);margin-top:10px}
    .actions{display:flex;gap:12px;margin-top:18px}
    .portrait{width:360px;max-width:100%;aspect-ratio:9/16;border:none;border-radius:18px;overflow:hidden;background:transparent}
    .portrait img{width:100%;height:100%;object-fit:cover}
    .section{padding:44px 0}
    .section h2{font-size:clamp(1.5rem,2.6vw,2rem);margin-bottom:14px}
    .rail{position:relative;overflow-x:auto;overflow-y:hidden;border-radius:18px;border:1px solid var(--line);background:linear-gradient(180deg,#0a0f1e,#090b18);scrollbar-width:thin;scrollbar-color:#3a437a transparent;cursor:grab}
    .rail:active{cursor:grabbing}
    .track{display:flex;gap:18px;align-items:center;padding:16px;animation:move 64s linear infinite;min-width:max-content}
    @keyframes move{to{transform:translateX(-50%)}}
    .rail.paused .track{animation-play-state:paused}
    .chip{position:relative;padding:.9rem 1.15rem;border-radius:16px;border:1px solid #22284a;background:#0a0f26;font-weight:900;box-shadow:0 10px 24px #0007;white-space:nowrap;transition:transform .18s,box-shadow .25s,border-color .2s,background .2s,opacity .2s,filter .2s}
    .rail.paused .chip{opacity:.5;filter:saturate(.7)}
    .rail.paused .chip.active{opacity:1;filter:none}
    .chip.active{transform:translateZ(0) scale(1.16);background:linear-gradient(180deg,#111733,#0a0f26);border-color:#4a52a6;box-shadow:0 22px 60px rgba(110,231,255,.3),0 0 0 2px rgba(110,231,255,.18) inset}
    .chip.active::after{content:"";position:absolute;inset:-5px;border-radius:22px;pointer-events:none;box-shadow:0 0 0 2px rgba(110,231,255,.24),0 0 34px rgba(139,92,246,.4)}
    .center{display:grid;place-items:center;margin-top:14px}
    .pill{display:inline-flex;align-items:center;gap:.6rem;padding:.9rem 1.3rem;border-radius:999px;border:0;background:linear-gradient(135deg,var(--g1),var(--g2));color:#0a0c18;font-weight:900;box-shadow:0 10px 28px #0009}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px}
    .card{border-radius:16px;border:1px solid var(--line);background:linear-gradient(180deg,rgba(15,20,40,.7),rgba(10,14,28,.7));box-shadow:0 14px 36px #0009;transform-style:preserve-3d;transition:transform .15s}
    .card img{width:100%;display:block;border-bottom:1px solid var(--line)}
    .card a{display:block;padding:14px 16px;color:#eaf1ff;text-decoration:none}
    .reveal{opacity:0;transform:translateY(16px);transition:opacity .6s,transform .6s}
    .reveal.on{opacity:1;transform:none}
    .cursor{position:fixed;left:0;top:0;width:30px;height:30px;border-radius:50%;background:radial-gradient(circle at 30% 30%,rgba(255,255,255,.85),rgba(255,255,255,.2));mix-blend-mode:overlay;pointer-events:none;z-index:99;transform:translate(-50%,-50%)}
    .course-info{position:relative;margin-top:16px}
    .course-panel{display:none;grid-template-columns:1.2fr .8fr;gap:16px;align-items:center;border:1px solid var(--line);border-radius:16px;background:linear-gradient(180deg,#0b1024,#0a0f1e);box-shadow:0 18px 50px rgba(0,0,0,.45),0 0 0 1px rgba(110,231,255,.08) inset;padding:16px;animation:fadeIn .22s ease}
    .course-panel.show{display:grid}
    .course-title{font-weight:800;font-size:1.15rem;margin-bottom:6px}
    .course-desc{color:#c1cced;font-size:.98rem;line-height:1.45}
    .course-bullets{margin-top:8px;color:#a8b4d9;font-size:.95rem}
    .course-bullets li{margin-left:18px;margin-top:4px}
    .preview{position:relative;width:100%;border:1px solid var(--line);border-radius:12px;overflow:hidden;background:linear-gradient(180deg,#070a12,#050812)}
    #courseCanvas{width:100%;height:260px;display:block}
    @keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}
    @media (max-width:980px){.hgrid{grid-template-columns:1fr}.portrait{width:240px}}
    .gallery{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px}
    .gallery a{display:block;border:1px solid var(--line);border-radius:14px;overflow:hidden;background:#0b1022}
    .gallery img{display:block;width:100%;height:auto}
    @media (max-width:480px) and (orientation:portrait){
      .section{padding:28px 0}
      .hgrid{grid-template-columns:1fr;gap:24px}
      .portrait{width:54vw}
      .preview{border-radius:14px}
      .rail{border-radius:14px}
      .cursor{display:none}
    }
    .notebook{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:16px}
    .note{border-radius:16px;border:1px solid var(--line);background:linear-gradient(180deg,rgba(15,20,40,.7),rgba(10,14,28,.7));padding:16px;box-shadow:0 14px 36px #0009}
    .note a{display:flex;align-items:center;justify-content:space-between;gap:12px;color:var(--ink);text-decoration:none;font-weight:700}
    .badge{font-size:.85rem;padding:.25rem .55rem;border-radius:999px;background:linear-gradient(135deg,var(--g1),var(--g2));color:#0a0c18}
  </style>
</head>
<body>

  <!-- Host for the shared tiles background (rendered by /assets/site.js) -->
  <div id="tiles"></div>

  <header class="header">
    <div class="wrap nav">
      <a class="brand" href="#top">
        <div class="logo">
          <svg width="18" height="18" viewBox="0 0 24 24"><path d="M12 2l2.8 6.6L22 9.3l-5 4.6L18.6 21 12 17.7 5.4 21 7 13.9 2 9.3l7.2-.7L12 2z" fill="white"/></svg>
        </div>
        <span class="title">Leo Shabarov</span>
      </a>
      <div class="links">
        <a href="#about">About</a>
        <a href="#courses">Courses</a>
        <a href="/notes/">Notebook</a>
        <a href="#desmos">Desmos</a>
        <a href="#contact">Contact</a>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section class="hero" id="top">
      <div class="hgrid">
        <div>
          <h1 class="h1">I build playful, math-flavored things.</h1>
          <p class="lead">Tilted gradient tiles flip and glow under your cursor.</p>
          <div class="actions">
            <a class="iconbtn" href="https://www.youtube.com/@leoshabarov" target="_blank" aria-label="YouTube">
              <svg width="22" height="22" viewBox="0 0 24 24"><path d="M23 12s0-3.3-.42-4.9c-.24-.9-.95-1.6-1.85-1.85C18.98 4.92 12 4.92 12 4.92s-6.98 0-8.73.33c-.9.25-1.61.96-1.85 1.86C1 8.7 1 12 1 12s0 3.3.42 4.9c.24.9.95 1.6 1.85 1.85 1.75.33 8.73.33 8.73.33s6.98 0 8.73-.33c.9-.25 1.61-.95 1.85-1.85.42-1.6.42-4.9.42-4.9z" fill="#ff0033"/><path d="M9.75 8.75v6.5L15.5 12l-5.75-3.25z" fill="#fff"/></svg>
            </a>
            <a class="iconbtn" href="https://www.instagram.com/leoshabarov/" target="_blank" aria-label="Instagram">
              <svg width="22" height="22" viewBox="0 0 24 24"><defs><linearGradient id="g" x1="0" x2="24" y1="0" y2="24"><stop stop-color="#feda75"/><stop offset=".3" stop-color="#fa7e1e"/><stop offset=".6" stop-color="#d62976"/><stop offset="1" stop-color="#962fbf"/></linearGradient></defs><rect x="4" y="4" width="16" height="16" rx="5" fill="url(#g)"/><circle cx="12" cy="12" r="3.5" fill="#fff"/><circle cx="17.5" cy="6.5" r="1.2" fill="#fff"/></svg>
            </a>
          </div>
        </div>
        <div class="portrait"><img src="images/portrait.png" alt="Portrait of Leo"></div>
      </div>
    </section>

    <section id="about" class="section reveal">
      <h2>About</h2>
      <p class="lead">I like problems that reward patience and clarity. My favorite loop is learn → explain → build. I drift toward visuals that make tricky concepts feel obvious.</p>
    </section>

    <section id="courses" class="section reveal">
      <h2>Courses I’ve finished</h2>
      <div class="rail" id="rail"><div class="track" id="track"></div></div>
      <div class="course-info">
        <div class="course-panel" id="coursePanel">
          <div>
            <div class="course-title" id="courseTitle"></div>
            <div class="course-desc" id="courseDesc"></div>
            <ul class="course-bullets" id="courseBullets"></ul>
          </div>
          <div class="preview"><canvas id="courseCanvas"></canvas></div>
        </div>
      </div>
      <div class="center"><div class="pill">Currently learning: Complex Analysis</div></div>
    </section>

    <section id="desmos" class="section reveal">
      <h2>Desmos Gallery</h2>
      <div class="grid">
        <div class="card">
          <a href="https://www.desmos.com/calculator/be7a168fbe" target="_blank" rel="noopener">
            <img src="images/unit_circle.png" alt="Unit Circle Visualization">
            Unit Circle Visualization
          </a>
        </div>
        <div class="card">
          <a href="https://www.desmos.com/calculator/14a5e1c18a" target="_blank" rel="noopener">
            <img src="images/stinky.png" alt="Animation Preview">
            Animation Preview
          </a>
        </div>
        <div class="card">
          <a href="https://www.desmos.com/calculator/3666017f8b" target="_blank" rel="noopener">
            <img src="images/3d_cube.png" alt="3D Cube">
            3D Cube
          </a>
        </div>
      </div>
    </section>

    <section id="notebook" class="section reveal">
      <h2>Notebook</h2>
      <p class="lead">Short, visual write-ups I’m trying.</p>
      <div class="notebook">
        <div class="note">
          <a href="/notes/">
            <span>Browse all notes</span>
            <span class="badge">open</span>
          </a>
        </div>
        <div class="note">
          <a href="/notes/bases-and-adics.html">
            <span>Bases and Adics</span>
            <span class="badge">new</span>
          </a>
        </div>
      </div>
    </section>

    <section id="contact" class="section reveal">
      <h2>Contact</h2>
      <div class="grid"><div class="card"><a href="mailto:hello@leoshabarov.com">Email</a></div></div>
    </section>
  </main>

  <footer class="wrap">
    <div class="nav" style="padding:0">
      <a class="brand" href="#top">
        <div class="logo"><svg width="18" height="18" viewBox="0 0 24 24"><path d="M12 2l2.8 6.6L22 9.3l-5 4.6L18.6 21 12 17.7 5.4 21 7 13.9 2 9.3l7.2-.7L12 2z" fill="white"/></svg></div>
        <span class="title">Leo Shabarov</span>
      </a>
      <div style="color:#7f93c9">© <span id="year"></span></div>
    </div>
  </footer>

  <div class="cursor" id="cursor"></div>

  <!-- Shared background + hue rotation, centralized -->
  <script defer src="/assets/site.js"></script>

  <!-- Page-specific JS (no tiles/background logic here) -->
  <script>
  const rail=document.getElementById('rail');
  const track=document.getElementById('track');
  const courses=['Algebra I','Geometry','Algebra II','Pre-Calc','Calculus I','Calculus II','Calculus III','ODE','Linear Algebra','Discrete Math','Real Analysis'];

  function oneRow(){
    const d=document.createElement('div');
    d.style.display='flex'; d.style.gap='18px';
    for(const c of courses){
      const el=document.createElement('div');
      el.className='chip'; el.textContent=c; el.dataset.course=c; d.appendChild(el);
    }
    return d;
  }
  const loops=4; for(let i=0;i<loops;i++) track.appendChild(oneRow());

  let loopWidth=0; function measureLoop(){
    const first=track.firstElementChild; loopWidth=first?first.getBoundingClientRect().width+18:0
  }
  setTimeout(measureLoop,0);

  rail.addEventListener('scroll',()=>{
    if(!rail.classList.contains('paused')) return;
    if(loopWidth<=0) return;
    const two=loopWidth*2;
    if(rail.scrollLeft>two) rail.scrollLeft-=loopWidth;
    else if(rail.scrollLeft<0) rail.scrollLeft+=loopWidth
  });

  let isDown=false,startX=0,scrollL=0;
  rail.addEventListener('pointerdown',e=>{
    if(!rail.classList.contains('paused'))return;
    isDown=true; rail.setPointerCapture(e.pointerId); startX=e.clientX; scrollL=rail.scrollLeft
  });
  rail.addEventListener('pointermove',e=>{
    if(!isDown)return; rail.scrollLeft=scrollL-(e.clientX-startX)
  });
  rail.addEventListener('pointerup',()=>{isDown=false});
  rail.addEventListener('wheel',e=>{ if(rail.classList.contains('paused')) rail.scrollLeft+=e.deltaY });

  const panel=document.getElementById('coursePanel');
  const titleEl=document.getElementById('courseTitle');
  const descEl=document.getElementById('courseDesc');
  const bulletsEl=document.getElementById('courseBullets');
  const canvas=document.getElementById('courseCanvas');
  const ctx=canvas.getContext('2d');
  const preview=document.querySelector('.preview');
  let animRAF=null;

  const courseInfo={
    'Algebra I':{d:'Linear relationships, slope, and intercepts.',b:['Slope as rise/run','Slope-intercept form','Point-slope links','Systems intuition'],a:'alg1'},
    'Geometry':{d:'AA similarity: overlay, then slide right and scale.',b:['AA similarity','Correspondence','Scale factor grows','Angles preserved'],a:'geom'},
    'Algebra II':{d:'Polynomial x^5 − 4x^3 + 3x with zeros.',b:['Multiplicity view','End behavior','Exact zeros','Reveal order'],a:'alg2'},
    'Pre-Calc':{d:'Unit-circle point drives the sine and cosine traces.',b:['Unit circle','Sin & cos','Phase lock','Parametric link'],a:'precalc'},
    'Calculus I':{d:'Static curve with drifting Riemann rectangles.',b:['Limits','Derivatives','Optimization','Riemann areas'],a:'calc1'},
    'Calculus II':{d:'Polar curve with sweeping area.',b:['Polar curves','Area sweep','Param angle','Dynamic radius'],a:'calc2'},
    'Calculus III':{d:'3D surface with a sweeping path integral.',b:['3D axes','Surface mesh','Path sweep','Integral feel'],a:'calc3'},
    'ODE':{d:'Competing directions on a color field that align into clusters, then reset.',b:['Random start','Slow neighbor blending','Clusters','Timed reset'],a:'ode'},
    'Linear Algebra':{d:'Transform grid with smaller arrowed basis (same background).',b:['Matrix action','Basis span','Eigen hints','Aligned grids'],a:'linalg'},
    'Discrete Math':{d:'Top node to all others—rapid multi-hop paths.',b:['Cycle source','Dense edges','Curved routes','Quick rhythm'],a:'discrete'},
    'Real Analysis':{d:'Squeeze Theorem: oscillations confined between shrinking bounds near 0.',b:['Upper/lower bounds','x sin(1/x)','Phase drift','Convergence'],a:'real'}
  };

  function resizeCanvas(){
    const dpr=Math.min(devicePixelRatio||1,2);
    const cssW=preview.clientWidth||600;
    const tallPhone=matchMedia('(max-width: 480px) and (orientation: portrait)').matches;
    const cssH=tallPhone?Math.max(260,Math.min(500,cssW*0.95)):Math.max(240,Math.min(360,cssW*0.70));
    canvas.width=Math.floor(cssW*dpr); canvas.height=Math.floor(cssH*dpr);
    ctx.setTransform(dpr,0,0,dpr,0,0);
  }
  function axes(W,H){
    ctx.save(); ctx.strokeStyle='rgba(255,255,255,.16)'; ctx.lineWidth=1;
    ctx.beginPath();
    for(let x=0;x<=W;x+=20){ctx.moveTo(x,0);ctx.lineTo(x,H)}
    for(let y=0;y<=H;y+=20){ctx.moveTo(0,y);ctx.lineTo(W,y)}
    ctx.stroke(); ctx.restore();
  }
  function showPanel(name){
    const info=courseInfo[name];
    titleEl.textContent=(name==='ODE')?'Ordinary Differential Equations':name;
    descEl.textContent=info.d;
    bulletsEl.innerHTML=info.b.map(s=>`<li>${s}</li>`).join('');
    panel.classList.add('show'); rail.classList.add('paused');
    document.querySelectorAll('.chip').forEach(x=>x.classList.toggle('active',x.dataset.course===name));
    requestAnimationFrame(()=>{resizeCanvas(); startAnim(info.a)});
  }
  function hidePanel(){
    panel.classList.remove('show'); rail.classList.remove('paused');
    document.querySelectorAll('.chip').forEach(x=>x.classList.remove('active'));
    if(animRAF){cancelAnimationFrame(animRAF); animRAF=null}
  }
  document.querySelectorAll('.chip').forEach(ch=>ch.addEventListener('mouseenter',()=>showPanel(ch.dataset.course)));
  panel.addEventListener('mouseleave',hidePanel);

  function startAnim(type){
    if(animRAF){cancelAnimationFrame(animRAF); animRAF=null}
    let t=0;
    function draw(){
      t++;
      const W=preview.clientWidth||600, H=canvas.height/(Math.min(devicePixelRatio||1,2))||260;
      ctx.clearRect(0,0,W,H); axes(W,H); ctx.save();
      const tallPhone=matchMedia('(max-width: 480px) and (orientation: portrait)').matches;
      ctx.translate(W/2+(tallPhone?6:24),H/2); if(tallPhone) ctx.scale(0.92,0.92);
      ctx.lineWidth=2.5; ctx.strokeStyle='rgba(142,197,255,.95)';

      // --- animations (unchanged) ---
      if(type==='alg1'){ const m=0.25+0.55*Math.abs(Math.sin(t*0.008)); const b=18*Math.sin(t*0.006);
        ctx.beginPath(); for(let x=-W;x<=W;x+=2){const y=-(m*x+b); x===-W?ctx.moveTo(x,y):ctx.lineTo(x,y)} ctx.stroke();
        const x0=-120, y0=-(m*x0+b), dx=130, dy=-(m*dx);
        ctx.setLineDash([6,6]); ctx.strokeStyle='rgba(255,255,255,.5)';
        ctx.beginPath(); ctx.moveTo(x0,y0); ctx.lineTo(x0+dx,y0); ctx.moveTo(x0+dx,y0); ctx.lineTo(x0+dx,y0+dy); ctx.stroke(); ctx.setLineDash([]);
        ctx.fillStyle='rgba(200,220,255,.95)'; ctx.font='12px Space Grotesk'; ctx.fillText('Δx',x0+dx/2-8,y0-6); ctx.fillText('Δy',x0+dx+6,y0+dy/2);
      }
      // (…keep your other cases: geom, alg2, precalc, calc1, calc2, calc3, ode, linalg, discrete, real — unchanged for brevity …)

      ctx.restore(); animRAF=requestAnimationFrame(draw);
    }
    draw();
  }

  // soft cursor trail
  const cursor=document.getElementById('cursor'); let cx=0,cy=0,tx=0,ty=0;
  function loop(){ cx+=(tx-cx)*0.18; cy+=(ty-cy)*0.18; cursor.style.left=cx+'px'; cursor.style.top=cy+'px'; requestAnimationFrame(loop) }
  loop(); addEventListener('mousemove',e=>{tx=e.clientX; ty=e.clientY});

  // footer year + reveals
  document.getElementById('year').textContent=new Date().getFullYear();
  const obs=new IntersectionObserver(es=>{for(const e of es){if(e.isIntersecting)e.target.classList.add('on')}},{threshold:.15});
  for(const el of document.querySelectorAll('.reveal')) obs.observe(el);
  </script>
</body>
</html>
